#  Приложение To Do c архитектурой VIPER

## Section_1: Цели создания приложения. Что будет результатом?

    Целью создания данного приложения является создать шаблон действий(порядок действий) по разработке простейших экранов с навигацией и редактированием данных с использованием архитектуры VIPER.
    Vew Interactor Presenter Entity Router - приложение, созданное строго в соотвествии с требованиями данной архитектуры, должно содержать модули которые будут иметь строгое предназначение(абстракцию) и соотвественно легко будет покрыть тестами все unit модули приложения  
## Результатом будет пошаговая инструкция действий при создании приложения с архитектурой VIPER
    
## Какие есть требования и какие есть исходные данные. Обрисовать общий контекст ситуации.

Приложение с названием ToDo List требуется написать на языке Swift с возможностью добавления, редактирования и сохранения задач.
    
## Исходные требования(задачи): 

###  1: Функционал для пользователя: 
    1.1 Возможность отображения задач
    1.2 Возможность добавления новой задачи
    1.3 Возможность редактирования задачи
    1.4 Возможность удаления задачи
    1.5 Возможность поиска по задачам
    
###  2: Функционал приложения:
    2.1 Использование GIT
    2.2 Архитектура приложения: VIPER
    2.3 Получение (загрузка по сети интернет) списка задач с использование JSON
    2.4 Многопоточная обработка данных в приложении с использованием GCD или NSOperation
    2.5 Сохранение данных с использование Core Data
    2.6 Компоненты приложения должны быть покрыты Unit тестами
    
## Section 2: Исходные данные

    Перед созданием нового проекта, необходимо заранее определиться при помощи какого framework будет создаваться UI. В задании не найдено строгого указания на такой, поэтому выберем SwiftUI. При помощи этого framework можно создать указанный в макете UI с написанием меньшего количества кода.
    
    Набор ссылок: 
        JSON API
    https://disk.360.yandex.ru/d/QWunjxshsMk-zg
    Ссылка на макеты
    https://www.figma.com/design/ElcIDP3PIp5iOE4dCtPGmd/%D0%97%D0%B0%D0%B4%D0%B0%D1%87%D0%B8?node-id=0-1&p=f

### 2.1 Определить минимальную версию iOS.
    1. Поскольку в требованиях не указана минимальная версия iOS, то для данного приложения выберем версию 18.5
    2. Такую же версию ос нужно выставить в Targets для Unit tests
    
### 2.2 Определить список устройств для которых предназначено данное приложение и установить требуемы ориентации устройств  
    1. В требованиях нет упоминания на каких устройствах приложение должно запускаться и какие положения устройства поддерживать, но судя по макету это должен быть iPhone в ориентации Portrait. Оставим только это устройство и только одну ориентацию.
    2. Так же уберем лишние устройства в Targets для тестов
    
### 2.3 Сбор данных из макета Figma необхдимых для UI: Количество экранов, шрифты, цвета, картинки
    В Приложении будет два экрана, главный экран для оборажения списка задач и второй экран для отображения деталей задачи и редактирования.
    1. Создадим папку Resources и в ней папку Theme. В эту папку положим все необходимые для UI элементы из макета Figma
    2. Добавляем цвета из макета Figma в assets catalogue, создадим файл colors.xcassets. На макете предположительно имются два кастомных цвета: желтый, который используется как accent color и тёмно серый, используется когда задача помечена как выполненная.
    3. Добавляем шрифты в папку Theme: понадобится добавить два файла со шрифтами.
    4. Добавим картинки из макета. В макете используется 7 каастомных картинок: для отображения статуса задачи - выполнено или нет и для контекстного меню. Для этого создадим assets каталог Images
    5. Добавим картинки в каталог
    6. Создадим файл Theme.swift и сделаем в нём расширение для струтуры Color и для структуры Font чтобы добавить в SwiftUI требуемые цвета и шрифты
    
## Section 3: Cоздание файлов для обработки и предоставления данных для UI

### VIPER нужен для разделения модулей и для тестирования. 

    1 Добавим файл TestPlan.xctestplan. При помощи этого файла будем отслеживать покрытие тестами кода. Посмотреть инструкцию как сделать можно по ссылке Apple Developer Documentaion:
    https://developer.apple.com/documentation/xcode/determining-how-much-code-your-tests-cover
    2 При добавлении новых классов, структур перечислений необходимо при создании указывать в таргетах unit test или после создания в панели инспекторов во вкладке file inspector
    3 Посмотреть покрытие тестами можно после запуска тестов. Запустить тесты можно в панели наввигации во вкладке test navigator. Дале во вкладке report navigator -> coverage можно увидеть проыент покрытия тестами кода. Если кликнуть по coverage, то можно увидеть что конкретно не покрыто тестами.
      
    
### 4 Создадим структуру данных для UI и для получения данных по сети на основе макета из Figma и на основе данных получаемых по сети при помощи JSON.
    
    5. По макету Figma имеем:
    Два экрана, на первом экране есть список задач и у каждой задачи есть следующие элдементы:
    - название задачи - String
    - описание задачи  - String
    - дата задачи - String or Date formatted
    - checkbox: выполнена задача или нет - UIImage
    если задача выполнена меняется шрифт и цвет шрифта Названия задачи и цвет шрифта описания задачи
    меняется цвет и картинка checkbox
    
    6. По файлу JSON имеем:
    - "id" задачи - числовое значение Int
    - "todo" - название задачи String
    - "completed" - Bool
    - "usedId" - числовое значение Int
    
    7. Получение данных по сети:
    Для получения данных из сети создадим папку Entities файл Todo.swift и запишем в этом файле структуру Todo. Подпишем структуру под identifiable and decodable. 
    Эта структура данных будет использоваться только для получения данных по сети.
    
    Для работы с UI будет использоваться структура данных из CoreData
    
    8. Обработка ошибок:
    При получении данных по сети могут происходить ошибки, для их обработки созадим enum ErrorHandler. Будем добавлять кейсы с ошибками по мере необходимости
    
    9. Сделаем тестирование этой структуры Todo и для ErrorHandler
    Unit тесты будем делать в файле ToDo_VIPER_1_1Tests.swift
    
    10. Поскольку структуру Todo делали для получения данных по сети, в файле с тестами понадобится свойство с типом JSONDecoder
    11. Для тестирования понадобится тестовые данные в формате JSON. Возьмём первый объект из файла по ссылке выше и положим его в файл TestData.swift. Предварительно нужно создать такой файл и создадим его в папке Resources
    12. Добавим тест для Todo и проверим получение данных. 
    
    После прохождения теста проверим code test coverage и увидим, что показатель изменился с 49% на 89% и в деталях видно , что не покрыто тестами ErrorHandler
    13. Сделаем тест для ErrorHandler show error message description
    
    После теста проверим code test coverage и увидим, что покрытие тестами равно 100% 
    
    14. Для получения всех todo необходимо создать еще одну структуру. Создадим для нее файл и добавим в таргеты UI test. 
    15. Для тестирования понадобится добавить JSON данные в TestData.swift аналогичние как приходят по сети.
    16. Напишем тест, убедимся что тест пройден
    
### 17. Создание и тестирование Core Data. Для этого сделаем папку CoreData в паке Resources и создадим в ней файл модели Coredata. Название файл сделаем таким же как и название приложения
    
    
    
    
    
    
    
    
    


